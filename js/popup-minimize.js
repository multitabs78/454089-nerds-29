const openModal=document.querySelector(".contacts__button"),feedbackPopup=document.querySelector(".feedback__overlay"),closeModal=feedbackPopup.querySelector(".feedback__close"),feedbackForm=feedbackPopup.querySelector(".feedback__form"),name=feedbackForm.querySelector(".feedback__text--name"),email=feedbackForm.querySelector(".feedback__text--email"),textarea=feedbackForm.querySelector(".feedback__textarea");let text=feedbackForm.querySelectorAll(".feedback__text"),isStorageSupport=!0,nameStorage="",emailStorage="";try{nameStorage=localStorage.getItem("name"),emailStorage=localStorage.getItem("email")}catch(e){isStorageSupport=!1}openModal.addEventListener("click",function(e){e.preventDefault(),feedbackPopup.classList.add("feedback--active"),nameStorage&&emailStorage?(name.value=nameStorage,email.value=emailStorage,setTimeout(()=>{textarea.focus()},800)):nameStorage?(name.value=nameStorage,setTimeout(()=>{email.focus()},800)):setTimeout(()=>{name.focus()},800)}),closeModal.addEventListener("click",function(e){e.preventDefault(),feedbackPopup.classList.remove("feedback--active"),feedbackPopup.classList.remove('feedback-error"'),name.classList.remove("feedback__text--error"),email.classList.remove("feedback__text--error"),textarea.classList.remove("feedback__text--error")}),feedbackForm.addEventListener("submit",function(e){name.value?isStorageSupport&&localStorage.setItem("name",name.value):(e.preventDefault(),feedbackPopup.classList.remove('feedback-error"'),openModal.offsetWidth=openModal.offsetWidth,name.classList.add("feedback__text--error"),feedbackPopup.classList.add("feedback-error"))}),feedbackForm.addEventListener("submit",function(e){email.value?isStorageSupport&&localStorage.setItem("email",email.value):(e.preventDefault(),feedbackPopup.classList.remove('feedback-error"'),openModal.offsetWidth=openModal.offsetWidth,email.classList.add("feedback__text--error"),feedbackPopup.classList.add("feedback-error"))}),feedbackForm.addEventListener("submit",function(e){null!=textarea.value&&""!=textarea.value.length||(e.preventDefault(),feedbackPopup.classList.remove('feedback-error"'),openModal.offsetWidth=openModal.offsetWidth,textarea.classList.add("feedback__text--error"),feedbackPopup.classList.add("feedback-error"))}),feedbackPopup.addEventListener("click",function(e){e.target.closest(".feedback")||(feedbackPopup.classList.remove("feedback--active"),name.classList.remove("feedback__text--error"),email.classList.remove("feedback__text--error"),textarea.classList.remove("feedback__text--error"),feedbackPopup.classList.remove("feedback-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&feedbackPopup.classList.contains("feedback--active")&&(e.preventDefault(),feedbackPopup.classList.remove("feedback--active"),name.classList.remove("feedback__text--error"),email.classList.remove("feedback__text--error"),textarea.classList.remove("feedback__text--error"),feedbackPopup.classList.remove("feedback-error"))});
